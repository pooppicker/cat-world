{"version":3,"sources":["webpack:///./src/views/Categories.vue?6489","webpack:///./src/assets/apis/category.js","webpack:///src/views/Categories.vue","webpack:///./src/views/Categories.vue?f63d","webpack:///./src/views/Categories.vue","webpack:///./src/views/Categories.vue?558d"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","directives","name","rawName","value","expression","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","selected_category","multiple","_l","category","key","id","domProps","_v","_s","n","url","stopPropagation","preventDefault","addFavorite","nextBtn","staticRenderFns","getCategory","apiHelper","get","components","Spinner","data","categories","images","page","limit","include_categories","isProcessing","created","fetchCategory","methods","watch","fetchImages","console","log","component"],"mappings":"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","file":"js/chunk-06509bb0.9af67045.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"categoies\"},[_c('div',{staticClass:\"categories-container\"},[_c('form',{staticClass:\"select-form\"},[_c('label',{attrs:{\"for\":\"category\"}}),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selected_category),expression:\"selected_category\"}],attrs:{\"name\":\"category\",\"id\":\"category\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selected_category=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.categories),function(category){return _c('option',{key:category.id,attrs:{\"selected\":\"\"},domProps:{\"value\":category}},[_vm._v(\" \"+_vm._s(category.name)+\" \")])}),0)]),(_vm.isProcessing)?_c('Spinner'):_c('div',{staticClass:\"cate-photos\"},_vm._l((_vm.images),function(n){return _c('div',{key:n.id,staticClass:\"cate-container\"},[_c('div',{staticClass:\"cate-card\"},[_c('img',{attrs:{\"src\":n.url,\"alt\":\"\"}}),_c('button',{staticClass:\"add-fav\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addFavorite(n.id)}}},[_vm._v(\" Favorite \")])])])}),0),_c('button',{staticClass:\"nxt-btn\",on:{\"click\":_vm.nextBtn}},[_vm._v(\"Next\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { apiHelper } from \"../../utils/helpers\";\n\nexport default {\n  getCategory() {\n    return apiHelper.get(\"/categories\");\n  },\n};\n","<template>\n  <div class=\"categoies\">\n    <div class=\"categories-container\">\n      <!-- Select Categories -->\n      <form class=\"select-form\">\n        <label for=\"category\"></label>\n        <select name=\"category\" id=\"category\" v-model=\"selected_category\">\n          <option\n            v-for=\"category in categories\"\n            :key=\"category.id\"\n            :value=\"category\"\n            selected\n          >\n            {{ category.name }}\n          </option>\n        </select>\n      </form>\n      <Spinner v-if=\"isProcessing\" />\n      <!-- Category Image -->\n      <div v-else class=\"cate-photos\">\n        <div v-for=\"n in images\" :key=\"n.id\" class=\"cate-container\">\n          <div class=\"cate-card\">\n            <img :src=\"n.url\" alt=\"\" />\n            <button @click.stop.prevent=\"addFavorite(n.id)\" class=\"add-fav\">\n              Favorite\n            </button>\n          </div>\n        </div>\n      </div>\n      <button class=\"nxt-btn\" @click=\"nextBtn\">Next</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport categoryAPI from \"../assets/apis/category\";\nimport { Toast } from \"../utils/helpers\";\nimport axios from \"axios\";\nimport Spinner from \"../components/Spinner.vue\";\nexport default {\n  components: {\n    Spinner,\n  },\n  data() {\n    return {\n      categories: [],\n      selected_category: {},\n      images: [],\n      page: 1,\n      limit: 15,\n      include_categories: true,\n      isProcessing: false,\n    };\n  },\n  created() {\n    axios.defaults.headers.common[\"x-api-key\"] =\n      \"5905330e-b817-403e-ae23-ff5a4809c66d\";\n    this.fetchCategory();\n  },\n  methods: {\n    async fetchCategory() {\n      try {\n        let response = await categoryAPI.getCategory();\n        this.categories = response.data;\n        this.selected_category = this.categories[2];\n      } catch (error) {\n        console.log(error);\n        Toast.fire({\n          icon: \"error\",\n          title: \"cannot load category\",\n        });\n      }\n    },\n    async fetchImages() {\n      try {\n        this.isProcessing = true;\n        let query_params = {\n          limit: this.limit,\n          page: this.page - 1,\n          include_categories: this.include_categories,\n          category_ids: this.selected_category.id,\n        };\n        let response = await axios.get(\n          \"https://api.thecatapi.com/v1/images/search\",\n          { params: query_params }\n        );\n\n        this.images = response.data;\n        this.isProcessing = false;\n        window.scrollTo({\n          top: 0,\n        });\n        console.log(response);\n      } catch (error) {\n        console.log(error);\n        Toast.fire({\n          icon: \"error\",\n          title: \"cannot load images\",\n        });\n      }\n    },\n    async addFavorite(image_id) {\n      try {\n        let post_body = {\n          image_id: image_id,\n          sub_id: \"your-user-1234\",\n        };\n        let response = await axios.post(\n          \"https://api.thecatapi.com/v1/favourites\",\n          post_body\n        );\n        this.images = this.images.filter((image) => image.id !== image_id); //按了加到最愛後消失\n        Toast.fire({\n          icon: \"success\",\n          title: \"Image added to My Favorite!\",\n        });\n        console.log(response.data);\n      } catch (error) {\n        console.log(error);\n        Toast.fire({\n          icon: \"error\",\n          title: \"Cannot add image to My Favorite\",\n        });\n      }\n    },\n    async nextBtn() {\n      this.page++;\n      await this.fetchImages();\n    },\n  },\n  watch: {\n    page: function () {\n      this.fetchImages;\n    },\n    selected_category: function () {\n      console.log(this.selected_category);\n      this.fetchImages();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../assets/scss/colorAndSize.scss\";\n.categories {\n  height: 100%;\n  width: 100%;\n}\n.categories-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  .select-form {\n    margin-top: 6rem;\n    margin-bottom: 2rem;\n    select {\n      border: none;\n      border-bottom: 1px solid $color_light_blue;\n      color: $color_black;\n      font-size: 16px;\n      width: 300px;\n      height: 30px;\n      text-transform: capitalize;\n    }\n  }\n}\n.cate-photos {\n  // outline: 1px solid black;\n\n  padding-top: 2rem;\n  .cate-container {\n    .cate-card {\n      margin-bottom: 1rem;\n      img {\n        border-radius: 5px;\n        width: 300px;\n        height: 300px;\n        object-fit: cover;\n      }\n      .add-fav {\n        margin: 1rem 0 1rem 0;\n        width: 80px;\n        height: 40px;\n        border-radius: 5px;\n        color: white;\n        font-size: 16px;\n        box-shadow: 2px 2px 5px 1px rgb(192, 189, 189);\n        background: $color_yellow;\n        &:hover {\n          animation: strech 0.5s linear;\n        }\n      }\n    }\n  }\n}\n.nxt-btn {\n  margin: 1rem 1rem 6rem 0;\n  width: 60px;\n  height: 40px;\n  color: rgb(66, 64, 42);\n  background: $color_light_blue;\n  font-size: 16px;\n  border-radius: 5px;\n  box-shadow: 0px 3px 5px 1px rgb(192, 189, 189);\n}\n@keyframes strech {\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.2);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n// Medium Screen\n@media screen and (min-width: 700px) {\n  .cate-photos {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-wrap: wrap;\n    gap: 2rem;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Categories.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Categories.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Categories.vue?vue&type=template&id=53da9dba&\"\nimport script from \"./Categories.vue?vue&type=script&lang=js&\"\nexport * from \"./Categories.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Categories.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Categories.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}